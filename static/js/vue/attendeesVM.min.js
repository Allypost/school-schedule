window.attendeesVM=new Vue({el:"#attendees",data:{teaching:{},attendees:{}},methods:{getTeachingUrl:function(){return $(this.$el).attr("data-teaching")},fetchTeaching:function(){var e=this,t=e.getTeachingUrl();$.get(t).done(function(t){t.data.forEach(e.editTeaching),e.fetchAttendees(),e.loading=!1})},editTeaching:function(e,t){this.$edit(this.teaching,e.id,e),t&&typeof t==typeof!0&&this.fetchLessonAttendees(e.id)},removeTeaching:function(e){this.$delete(this.teaching,e),this.$delete(this.attendees,e)},getAttendeesUrl:function(e){var t=$(this.$el).attr("data-attendees");return t.replace(":lesson",e)},fetchAttendees:function(){var e=this,t=e.getAttendeesUrl(" ").slice(0,-1);$.get(t).done(e.editAttendees)},editAttendees:function(e){var t=e.data;for(var n in t)t.hasOwnProperty(n)&&this.editAttendee(n,t[n])},editAttendee:function(e,t){return this.$edit(this.attendees,e,t)},fetchLessonAttendees:function(e){var t=this,n=t.getAttendeesUrl(e);$.get(n).done(function(n){t.editLessonAttendee(e,n.data)})},editLessonAttendee:function(e,t){this.$set(this.attendees,e,t)},btnStatus:function(e,t){var n=this;n[e]=!0,window.clearInterval(n.btnInterval);var i=function(){n[e]=!1,(t=t||function(){})()};return t||(n.btnInterval=window.setTimeout(i,1500)),i},$edit:function(e,t,n){var i=this;i.$set(e,t,n),i.$nextTick(function(){var a=e[t],s=Object.keys(a),d=Object.keys(n);s.forEach(function(e){d.indexOf(e)<0&&i.$delete(a,e)})})}},mounted:function(){var e=this;$(document).ready(function(){e.fetchTeaching(),window.setInterval(function(){e.fetchTeaching()},6e4),$(".collapsible").collapsible()})}});