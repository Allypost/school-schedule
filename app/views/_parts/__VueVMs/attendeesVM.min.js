window.attendeesVM=new Vue({el:"#attendees",data:{lessons:[],users:{}},methods:{getTeachingUrl:function(){return $(this.$el).attr("data-lessons")},getAttendeesUrl:function(t){var e=$(this.$el).attr("data-users");return e.replace(":lesson",t)},fetchTeaching:function(){var t=this,e=t.getTeachingUrl();$.get(e).done(function(e){t.lessons=e.data;for(var n in e.data)if(e.data.hasOwnProperty(n)){var a=e.data[n];t.fetchAttendees(a.id)}t.loading=!1})},fetchAttendees:function(t){var e=this,n=e.getAttendeesUrl(t);$.get(n).done(function(n){e.$set(e.users,t,n.data)})},getLessons:function(){var t=this.lessons,e={};for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];e[a.id]={id:a.id,attending:!!a.attending}}return e},btnStatus:function(t,e){var n=this;n[t]=!0,window.clearInterval(n.btnInterval);var a=function(){n[t]=!1,(e=e||function(){})()};return e||(n.btnInterval=window.setTimeout(a,1500)),a}},mounted:function(){var t=this;$(document).ready(function(){t.fetchTeaching(),window.setInterval(function(){t.fetchTeaching()},6e4),$(".collapsible").collapsible()})}});