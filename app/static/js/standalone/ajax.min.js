function request(n){function t(n){var t=n.indexOf("/")+1,e=n.indexOf(";");return 0>=e&&(e=n.length),n.substring(t,e)}function e(n,e,i){return function(){if(n.readyState===XMLHttpRequest.DONE){var c=n.getResponseHeader("Content-Type"),a=t(c);return"json"===a&&(n.responseJSON=JSON.parse(n.responseText)),200===n.status?(isFunction(e)&&r.success(e),s(n)):(isFunction(i)&&r.error(e),o(n)),isFunction(u)&&u(n),this}}}function i(n){var t="";n=n||{};for(var e in n)n.hasOwnProperty(e)&&(""!=t&&(t+="&"),t+=e+"="+encodeURIComponent(n[e]));return t}var r=this,s=new Function,o=new Function,u=new Function;return this.make=function(t,r,s,o){var u=new XMLHttpRequest;return u?(u.onreadystatechange=e(u,s,o),u.open(t,n,!0),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(i(r)),this):(alert("There was a critical error. Please try again."),!1)},this.post=function(n,t,e){return this.make("POST",n,t,e)},this.get=function(n,t){return this.make("GET",[],n,t)},this.makeAPI=function(n,t,e,i){return this.make(n,t,function(n){var t=n.responseJSON||{},i=t.data||[];isFunction(e)||(e=new Function),e(i,n,t)},function(n){var t=n.responseJSON||{},e=t.errors||["Something went wrong"];isFunction(i)||(i=new Function),i(e,n,t)})},this.getAPI=function(n,t){return this.makeAPI("GET",[],n,t)},this.postAPI=function(n,t,e){var i=getCsrf();return n[i.key]=i.value,this.makeAPI("POST",n,t,e)},this.error=function(n){isFunction(n)||(n=new Function),o=n},this.success=function(n){isFunction(n)||(n=new Function),s=n},this.always=function(n){isFunction(n)||(n=new Function),u=n},this}